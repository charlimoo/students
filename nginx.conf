# start of frontend/nginx.conf
server {
    listen 80;
    
    # The root directory where your built React files are located
    root /usr/share/nginx/html;
    
    # The default file to serve
    index index.html;

    # Handle all locations
    location / {
        # This is the key for SPAs:
        # 1. Try to find the file as requested ($uri)
        # 2. Try to find a directory with that name ($uri/)
        # 3. If both fail, fall back to serving /index.html
        try_files $uri $uri/ /index.html;
    }

    # Optional: Gzip compression for better performance
    gzip on;
    gzip_vary on;
    gzip_proxied any;
    gzip_comp_level 6;
    gzip_types text/plain text/css text/xml application/json application/javascript application/xml+rss application/atom+xml image/svg+xml;
}
# end of frontend/nginx.conf